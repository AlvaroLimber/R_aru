load(url("https://github.com/AlvaroLimber/R_aru/raw/master/data/eh19.RData"))
##########
#librarías
##########
install.packages("dplyr")
library(dplyr)
library(dplyr)
library(dplyr)
library(dplyr)
library(dplyr)
rm(list=ls())
##########
#librarías
##########
#install.packages("dplyr")
library(dplyr)
##########
#bases
load(url("https://github.com/AlvaroLimber/R_aru/raw/master/data/eh19.RData"))
##########
#.scrape web
##########
install.packages("rvest")
library(rvest)
library(help=rvest)
ww<-read_html("https://www.worldometers.info/coronavirus/#countries")
tt<-html_table(ww)
View(tt)
tt[[1]]
now<-tt[[1]]
now
head(now)
head(now)
##########
table(eh19p$depto)
# operador pipe  %>% ctr+mayus+m
eh19p %>% select(depto) %>% table()
##########
table(eh19p$depto)
# operador pipe  %>% ctr+mayus+m
eh19p %>% select(depto) %>% table()
names(eh19p)
eh19p$s02a_02
eh19p %>% filter(s02a_03>=15) %>% group_by(depto,area) %>% summarise(mean(aestudio))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area) %>% summarise(mean(aestudio,na.rm = T))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>% summarise(mean(aestudio,na.rm = T))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>% summarise(me=mean(aestudio,na.rm = T))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>%
summarise(me=mean(aestudio,na.rm = T),max(ylab))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>%
summarise(me=mean(aestudio,na.rm = T),max(ylab,na.rm = T))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>%
summarise(me=mean(aestudio,na.rm = T),max_ylab=max(ylab,na.rm = T))
t1<-eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>%
summarise(me=mean(aestudio,na.rm = T),max_ylab=max(ylab,na.rm = T))
t1
#base de datos de jefes de hogar mujeres
unique(eh19p$s02a_02)
#base de datos de jefes de hogar mujeres
sexo<-unique(eh19p$s02a_02)
sexo
eh19p %>% select(s02a_05) %>% unique()
aux2<-eh19p %>% select(s02a_05) %>% unique()
jefe<-eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[2])
eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[2])
eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[1])
eh19p %>% filter(s02a_02==sexo[2])
aux2<-eh19p %>% select(s02a_05) %>% unique()
aux2
str(aux2)
aux2[1]
aux2[1,]
unique(eh19p$s02a_02)
aux2<-eh19p %>% select(s02a_05) %>% unique()#nota dplyr siempre su salida es dataframe
aux<-unique(eh19p$s02a_05)
aux
aux2<-unique(eh19p$s02a_05)
aux2
eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[1])
eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[1])
aux2
class(aux2)
str(aux2)
jefe<-eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[1])
#r nativo
# variable que identifique a las personas de 20 años o más
eh19p$p20<-(eh19p$s02a_03>=20)
table(eh19p$p20)
# dplyr
eh19p %>% mutate(pp20=(s02a_03>=20))
# dplyr
eh19p<-eh19p %>% mutate(pp20=(s02a_03>=20))
# crando una variable de grupos de edad
summary(eh19p$s02a_03)
eh19p %>% mutate(edad5=cut(s02a_03,c(0,60,100)))
eh19p %>% mutate(edad5=cut(s02a_03,seq(0,100,5)))
eh19p<-eh19p %>% mutate(edad5=cut(s02a_03,seq(0,100,5)))
table(eh19p$edad5)
table(eh19p$s02a_02,eh19p$edad5)
barplot(table(eh19p$s02a_02,eh19p$edad5))
barplot(table(eh19p$s02a_02,eh19p$edad5))
barplot(table(eh19p$s02a_02,eh19p$edad5),horiz = T)
quantile(eh19p$yhogpc)
quantile(eh19p$yhogpc,na.rm = T)
quantile(eh19p$yhogpc,seq(0,1,0.2),na.rm = T)
qq<-quantile(eh19p$yhogpc,seq(0,1,0.2),na.rm = T)
qq
eh19p<-eh19p %>% mutate(yhog_qq=cut(yhogpc,qq))
head(eh19p)
head(eh19p[,c("yhogpc","yhog_qq")])
table(eh19p$yhog_qq)
eh19p %>% mutate(nn=s02a_03<=5)
eh19p %>% mutate(nn=s02a_03<=5) %>% group_by(folio) %>% summarise(nn=sum(nn))
bdnn<-eh19p %>% mutate(nn=s02a_03<=5) %>% group_by(folio) %>% summarise(nn=sum(nn))
bdnn<-eh19p %>% mutate(nn=s02a_03<=5) %>% group_by(folio) %>% summarise(nn=sum(nn))
bdnn
jefe
bd<-merge(jefe,bdnn)
bd<-merge(bdnn,jefe)# merge folio 1:1 keep if _merge==3 using
bd<-merge(bdnn,jefe,by.x="folio",by.y="folio")# merge folio 1:1 keep if _merge==3 using
bd2<-merge(bdnn,jefe,by.x="folio",by.y="folio",all.x = T)
View(eh19p)
eh19p$s03a_01c
eh19p$s03a_01d2_cod
na.omit(eh19p$s03a_01d2_cod)
# funciones sobre texto
eh19p$s06b_11a
# funciones sobre texto
texto<-eh19p$s06b_11a
# funciones sobre texto
texto<-no.omit(eh19p$s06b_11)
# funciones sobre texto
texto<- no.omit(eh19p$s06b_11)
# funciones sobre texto
texto<- na.omit(eh19p$s06b_11)
# funciones sobre texto
texto<-eh19p$s06b_11
# funciones sobre texto
texto<-eh19p$s06b_11a
# funciones sobre texto
texto<- na.omit(eh19p$s06b_11a)
head(texto)
# funciones sobre texto
palabra<-"palabra"
texto<-na.omit(eh19p$s06b_11a)
nchar(palabra)
# funciones sobre texto
palabra<-"palabra   "
nchar(palabra)
nchar(palabra)
nchar(texto)
tolower(palabra)
toupper(palabra)
toupper(texto)
tolower(texto)
substr(palabra,1,3)
substr(texto,1,3)
?gsub
gsub("a","o",palabra)
gsub(" ","",palabra)
View(texto)
gsub(" ","",texto)
gsub("  ","",texto)
install.packages("tm")
library(tm)
library(help=tm)
# funciones sobre texto
palabra<-"palabra 68687676564"
removeNumbers(palabra)
# funciones sobre texto
palabra<-"palabra 68687676564 +++++.....;:.."
removeNumbers(palabra)
library(help=tm)
removePunctuation(palabra)
palabra %>% removeNumbers() %>% removePunctuation()
texto
removeWords(texto,c("EN"))
stopwords("es")
w<-removeWords(tolower(texto),stopwords("es"))
w
w<-removeWords(tolower(texto),c(stopwords("es"),"mecanico"))
w
