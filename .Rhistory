load(url("https://github.com/AlvaroLimber/R_aru/raw/master/data/eh19.RData"))
##########
#librarías
##########
install.packages("dplyr")
library(dplyr)
library(dplyr)
library(dplyr)
library(dplyr)
library(dplyr)
rm(list=ls())
##########
#librarías
##########
#install.packages("dplyr")
library(dplyr)
##########
#bases
load(url("https://github.com/AlvaroLimber/R_aru/raw/master/data/eh19.RData"))
##########
#.scrape web
##########
install.packages("rvest")
library(rvest)
library(help=rvest)
ww<-read_html("https://www.worldometers.info/coronavirus/#countries")
tt<-html_table(ww)
View(tt)
tt[[1]]
now<-tt[[1]]
now
head(now)
head(now)
##########
table(eh19p$depto)
# operador pipe  %>% ctr+mayus+m
eh19p %>% select(depto) %>% table()
##########
table(eh19p$depto)
# operador pipe  %>% ctr+mayus+m
eh19p %>% select(depto) %>% table()
names(eh19p)
eh19p$s02a_02
eh19p %>% filter(s02a_03>=15) %>% group_by(depto,area) %>% summarise(mean(aestudio))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area) %>% summarise(mean(aestudio,na.rm = T))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>% summarise(mean(aestudio,na.rm = T))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>% summarise(me=mean(aestudio,na.rm = T))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>%
summarise(me=mean(aestudio,na.rm = T),max(ylab))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>%
summarise(me=mean(aestudio,na.rm = T),max(ylab,na.rm = T))
eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>%
summarise(me=mean(aestudio,na.rm = T),max_ylab=max(ylab,na.rm = T))
t1<-eh19p %>% filter(s02a_03>=15) %>%
group_by(depto,area,s02a_02) %>%
summarise(me=mean(aestudio,na.rm = T),max_ylab=max(ylab,na.rm = T))
t1
#base de datos de jefes de hogar mujeres
unique(eh19p$s02a_02)
#base de datos de jefes de hogar mujeres
sexo<-unique(eh19p$s02a_02)
sexo
eh19p %>% select(s02a_05) %>% unique()
aux2<-eh19p %>% select(s02a_05) %>% unique()
jefe<-eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[2])
eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[2])
eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[1])
eh19p %>% filter(s02a_02==sexo[2])
aux2<-eh19p %>% select(s02a_05) %>% unique()
aux2
str(aux2)
aux2[1]
aux2[1,]
unique(eh19p$s02a_02)
aux2<-eh19p %>% select(s02a_05) %>% unique()#nota dplyr siempre su salida es dataframe
aux<-unique(eh19p$s02a_05)
aux
aux2<-unique(eh19p$s02a_05)
aux2
eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[1])
eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[1])
aux2
class(aux2)
str(aux2)
jefe<-eh19p %>% filter(s02a_02==sexo[2] & s02a_05==aux2[1])
#r nativo
# variable que identifique a las personas de 20 años o más
eh19p$p20<-(eh19p$s02a_03>=20)
table(eh19p$p20)
# dplyr
eh19p %>% mutate(pp20=(s02a_03>=20))
# dplyr
eh19p<-eh19p %>% mutate(pp20=(s02a_03>=20))
# crando una variable de grupos de edad
summary(eh19p$s02a_03)
eh19p %>% mutate(edad5=cut(s02a_03,c(0,60,100)))
eh19p %>% mutate(edad5=cut(s02a_03,seq(0,100,5)))
eh19p<-eh19p %>% mutate(edad5=cut(s02a_03,seq(0,100,5)))
table(eh19p$edad5)
table(eh19p$s02a_02,eh19p$edad5)
barplot(table(eh19p$s02a_02,eh19p$edad5))
barplot(table(eh19p$s02a_02,eh19p$edad5))
barplot(table(eh19p$s02a_02,eh19p$edad5),horiz = T)
quantile(eh19p$yhogpc)
quantile(eh19p$yhogpc,na.rm = T)
quantile(eh19p$yhogpc,seq(0,1,0.2),na.rm = T)
qq<-quantile(eh19p$yhogpc,seq(0,1,0.2),na.rm = T)
qq
eh19p<-eh19p %>% mutate(yhog_qq=cut(yhogpc,qq))
head(eh19p)
head(eh19p[,c("yhogpc","yhog_qq")])
table(eh19p$yhog_qq)
eh19p %>% mutate(nn=s02a_03<=5)
eh19p %>% mutate(nn=s02a_03<=5) %>% group_by(folio) %>% summarise(nn=sum(nn))
bdnn<-eh19p %>% mutate(nn=s02a_03<=5) %>% group_by(folio) %>% summarise(nn=sum(nn))
bdnn<-eh19p %>% mutate(nn=s02a_03<=5) %>% group_by(folio) %>% summarise(nn=sum(nn))
bdnn
jefe
bd<-merge(jefe,bdnn)
bd<-merge(bdnn,jefe)# merge folio 1:1 keep if _merge==3 using
bd<-merge(bdnn,jefe,by.x="folio",by.y="folio")# merge folio 1:1 keep if _merge==3 using
bd2<-merge(bdnn,jefe,by.x="folio",by.y="folio",all.x = T)
View(eh19p)
eh19p$s03a_01c
eh19p$s03a_01d2_cod
na.omit(eh19p$s03a_01d2_cod)
# funciones sobre texto
eh19p$s06b_11a
# funciones sobre texto
texto<-eh19p$s06b_11a
# funciones sobre texto
texto<-no.omit(eh19p$s06b_11)
# funciones sobre texto
texto<- no.omit(eh19p$s06b_11)
# funciones sobre texto
texto<- na.omit(eh19p$s06b_11)
# funciones sobre texto
texto<-eh19p$s06b_11
# funciones sobre texto
texto<-eh19p$s06b_11a
# funciones sobre texto
texto<- na.omit(eh19p$s06b_11a)
head(texto)
# funciones sobre texto
palabra<-"palabra"
texto<-na.omit(eh19p$s06b_11a)
nchar(palabra)
# funciones sobre texto
palabra<-"palabra   "
nchar(palabra)
nchar(palabra)
nchar(texto)
tolower(palabra)
toupper(palabra)
toupper(texto)
tolower(texto)
substr(palabra,1,3)
substr(texto,1,3)
?gsub
gsub("a","o",palabra)
gsub(" ","",palabra)
View(texto)
gsub(" ","",texto)
gsub("  ","",texto)
install.packages("tm")
library(tm)
library(help=tm)
# funciones sobre texto
palabra<-"palabra 68687676564"
removeNumbers(palabra)
# funciones sobre texto
palabra<-"palabra 68687676564 +++++.....;:.."
removeNumbers(palabra)
library(help=tm)
removePunctuation(palabra)
palabra %>% removeNumbers() %>% removePunctuation()
texto
removeWords(texto,c("EN"))
stopwords("es")
w<-removeWords(tolower(texto),stopwords("es"))
w
w<-removeWords(tolower(texto),c(stopwords("es"),"mecanico"))
w
rm(list=ls())
##########
#librarías
##########
library(dplyr)
##########
#librarías
##########
library(dplyr)
##########
#bases
load(url("https://github.com/AlvaroLimber/R_aru/raw/master/data/eh19.RData"))
##########
#bases
load(url("https://github.com/AlvaroLimber/R_aru/raw/master/data/eh19.RData"))
library(foreign)
#otra opción
#eh19p<-read.spss("")
##########
# Objetivo mostrar la tabla: área y pobreza moderada por departamento
eh19p$depto
eh19p %>% filter(depto=="Chuquisaca") %>% table(p0,area)
names(eh19p)
eh19p %>% filter(depto=="Chuquisaca") %>% select(p0,area)%>% table()
eh19p %>% filter(depto=="Chuquisaca") %>% select(p0,area)%>% table()
eh19p %>% filter(depto=="La Paz") %>% select(p0,area)%>% table()
for(i in  1:100){
i
}
for(i in  1:100){
print(i)
}
for(i in  seq(0,1,0.01)){
print(i)
}
for(i in c("hola","como","estan")){
print(i)
}
xx<-c("hola","como","estan","chau")
for(i in xx){
print(i)
}
xx<-c("hola","como","estan","chau")
for(i in xx){
print(i)
i<-3
}
for(i in xx){
i<-3
print(i)
}
xx<-c("hola","como","estan","chau")
for(i in xx){
print(i)
}
i
unique(eh19p$depto)
aux<-unique(eh19p$depto)
aux<-unique(eh19p$depto)
aux
for(j in aux){
eh19p %>% filter(depto==j) %>% select(p0,area)%>% table()
}
for(j in aux){
print(eh19p %>% filter(depto==j) %>% select(p0,area)%>% table())
}
eh19p %>% filter(depto==j) %>% select(p0,area)%>% table() %>% print()
for(j in aux){
eh19p %>% filter(depto==j) %>% select(p0,area)%>% table() %>% print()
}
for(j in aux){
t1<-eh19p %>% filter(depto==j) %>% select(p0,area)%>% table()
write.csv(t1,"i.csv")
}
j
paste0(j,".csv")
for(j in aux){
t1<-eh19p %>% filter(depto==j) %>% select(p0,area)%>% table()
nombre<-paste0(j,".csv")
write.csv(t1,nombre)
}
paste0(2231231231,"sdcsdcdsc",".txt",2)
for(i in 1:10){
for(j in 20:30){
for(k in 2:10){
print(i*j*k)
}
}
}
for(i in 1:10){
if(i<=5){
print(i)
print("hola")
}
}
for(i in 1:10){
if(i<=5){
print(i)
print("hola")
} else {
print(i*2)
print("chau")
}
}
for(i in 1:10){
if(i<=5){
print(i)
print("hola")
} else if(i >5 & i<9) {
print(i*2)
print("chau")
} else {
print("nada")
}
}
break()
break
for(i in 1:10){
if(i<=5){
print(i)
print("hola")
} else if(i >5 & i<9) {
print(i*2)
print("chau")
break
} else {
print("nada")
}
}
for(i in 1:10){
if(i<=5){
print(i)
next
print("hola")
} else if(i >5 & i<9) {
print(i*2)
print("chau")
} else {
print("nada")
}
}
k<-1
while(z>0.0001){
print(k)
z<-1/k
k<-k+1
}
z<-1
k<-1
while(z>0.0001){
print(k)
z<-1/k
k<-k+1
}
for(i in rep(2,10)){
print(i)
}
dir()
x<-6
if(x==6){
print("hola")
}
x<-6
if(x!=6){
print("hola")
}
cond<-(x==6)
if(cond){
print("hola")
}
cond
cond<-(x==6)
if(cond){
print("hola")
}
cond
!cond
if(!cond){
print("hola")
}
1:5>2
(1:5>2)
!(1:5>2)
6==7
(6==7 & 5==5)
!(6==7 & 5==5)
mean(1:10)
fx<-function(x){
y<-x^2
return(y)
}
fx(1:10)
plot(fx)
curve(fx)
plot(fx)
curve(fx)
plot(fx,xlim=c(-5,5))
curve(fx,xlim=c(-5,5))
gx<-function(x){
y<-exp(-x^2)
return(y)
}
plot(gx)
plot(gx,xlim=c(-4,4))
tcentral<-function(x){
m1<-mean(x)
m2<-median(x)
m3<-sd(x)
m4<-max(x)
m5<-quantile(x,seq(0,1,0.2))
m6<-sum(x^2)
}
tcentral(1:100)
tcentral(1:100)
tcentral<-function(x){
m1<-mean(x)
m2<-median(x)
m3<-sd(x)
m4<-max(x)
m5<-quantile(x,seq(0,1,0.2))
m6<-sum(x^2)
return(m1,m2)
}
tcentral(1:100)
tcentral<-function(x){
m1<-mean(x)
m2<-median(x)
m3<-sd(x)
m4<-max(x)
m5<-quantile(x,seq(0,1,0.2))
m6<-sum(x^2)
mm<-list(media=m1,mediana=m2,sd=m3,max=m4,quintiles=m5,x2=m6)
return(mm)
}
tcentral(1:100)
tcentral(1:100)
tcentral(1:100)
tcentral(1:100)
salida<-tcentral(1:100)
salida
salida$media
salida$quintiles
salida[[5]]
ineq<-function(x){
p01<-quantile(x,0.01)
p99<-quantile(x,0.99)
return(p99/p01)
}
ineq<-function(x){
p01<-quantile(x,0.01)
p99<-quantile(x,0.99)
return(p99/p01)
}
ineq<-function(x){
p01<-quantile(x,0.01)
p99<-quantile(x,0.99)
return(p99/p01)
}
ineq(1:10000)
ineq<-function(x){
p01<-quantile(x,0.01)
p99<-quantile(x,0.99)
return(as.double(p99/p01))
}
ineq(1:10000)
ineq<-function(x){
p01<-quantile(x,0.01,na.rm = T)
p99<-quantile(x,0.99,na.rm = T)
return(as.double(p99/p01))
}
ineq(1:10000)
ineq(eh19p$ylab)
eh19p %>% filter(s02a_03>=15)%>%
group_by(depto,area,s02a_02) %>% summarise(mean(ylab),ineq(ylab))
eh19p %>% filter(s02a_03>=15)%>%
group_by(depto,area,s02a_02) %>% summarise(mean(ylab,na.rm=T),ineq(ylab))
t1<-eh19p %>% filter(s02a_03>=15)%>%
group_by(depto,area,s02a_02) %>% summarise(mean(ylab,na.rm=T),ineq(ylab))
View(t1)
eh19p$ylab
na.omit(eh19p$ylab)
order(na.omit(eh19p$ylab))
sort(na.omit(eh19p$ylab))
cumsum(sort(na.omit(eh19p$ylab)))
cumsum(1:10)
cumsum(c(4,4,3,2,5,5))
cumsum(c(4,4,3,2,NA,5))
?cumsum(c(4,4,3,2,NA,5))
eh19p %>% mutate(cumedad=cumsum(s02a_03))
aux<-eh19p %>% mutate(cumedad=cumsum(s02a_03)) %>% select(s02a_03,cumedad)
head(aux)
tail(aux)
cumsum(rep(1,10))
rep(1,10)
p01<-quantile(x,0.01,na.rm = T)
p01
colnames(p01)
names(p01)
